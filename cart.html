<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="./assest/css/all.min.css">
    <link rel="stylesheet" href="./assest/css/fontawesome.min.css">
    <link rel="stylesheet" href="./assest/css/normalize.css">
    <link rel="stylesheet" href="./assest/css/style.css">
  </head>
  <body>
    <!-- ################## start navbar ########### -->
      <section class="nav_sec fixed-top">
        <div class="container">
          <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
              <a class="navbar-brand" href="#"><img src="./assest/images/logo.svg" alt="sorry not found"></a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item ml-4 custom_li">
                    <a class="nav-link active" aria-current="page" href="#">All restaurants</a>
                  </li>
                  <li class="nav-item ml-4 custom_li">
                    <a class="nav-link" href="#">about us</a>
                  </li>
                  <li class="nav-item ml-4 custom_li">
                    <a class="nav-link" href="#">contact us </a>
                  </li>
                  <li class="nav-item ml-4 custom_li login ">
                    <a class="nav-link" href="#"> Log in </a>
                  </li>
                  <li class="nav-item ml-4 custom_li">
                    <a  class="nav-link" href="./cart.html"> <span class="fa fa-shopping-cart" id="cart_icon" style="color:azure"></span> <span style="color:azure" class="cart-counter"> 0</span></a>
                </li> 
                </ul>
              </div>
            </div>
          </nav>
        </div>
      </section>
      <!-- ##################end navbar ######################## -->
      <!-- Cart item number head -->
        <div>
          <h2 class="py-4 font-weight-bold" id="cart-itemNo" style="margin-top: 3em; margin-left: 10em;">Cart ( <span id="cartCounterNo"></span> items)</h2>
        </div>
      <!--?????????????? Cart section ????????????????? -->
      <section class="home_sec" >
        <div class="container-fluid " id="hideContainer">
            <div class="row">
              <div class="col-md-10 col-11 mx-auto">
                <div class="row mt-5 gx-3">
                  <!-- left side div -->
                  <div class="col-md-12 col-lg-8 col-11 mx-auto main_cart mb-lg-0 mb-5 shadow" id="cart-items">
                  
                  <!-- 2nd card -->
               
                <!-- <div  class="card p-4" >
                  
                
              </div>   -->
            </div>
            <!-- right side div -->
            <div  class="col-md-12 col-lg-4 col-11 mx-auto mt-lg-0 mt-md-5">
              <div class="right_side p-3 shadow bg-white">
                <h2 class="product_name mb-5">The Total Amount Of</h2>
                <div class="price_indiv d-flex justify-content-between">
                  <p>Subtotal</p>
                  <p>EGP<span id="product_subtotal_amt"> </span></p>
                  </div>
                  <div class="price_indiv d-flex justify-content-between">
                    <p>Delivery fee</p>
                    <p>EGP 20</p>
                  </div>
                  
                  </div>
                  <hr />
                  <div class="price_indiv d-flex justify-content-between">
                    <p>Total Amount</p>
                    <span id="total_amount"></span>
                    
                    
                      
                  <button class="btn btn-primary text-uppercase checkout-btn"> Proceed to Checkout</button>
              
              </div>
            </div>

              </div>
            </div>
        </div>
        </div>

        <div class="container-fluid  mt-100" id="emptycart">

        </div>
      </section>
      <!--????????????????????????/ end ?????????????????????? -->

      <!--################## start footer ########################### -->
      <footer class="footer purple-bg ng-scope" ng-controller="FooterController">
            <section class="footercontent container p-x-0">
        <div class="home-footer">
            <section class="popular-links hidden-xs">
                <div class="row">
                    <div class="col-sm-4 hidden-xs">
                        <p>Restaurants</p>
                                <a href="/egypt/taboon-zamalek">Taboon</a>
                                <a href="/egypt/dawar-farah-mohandiseen">Dawar Farah - Mohandiseen</a>
                                <a href="/egypt/planet-africa-city-stars">Planet Africa</a>
                                <a href="/egypt/al-aseel-el-demashky-tagamoa-5">Al Aseel El Demashky</a>
                                <a href="/egypt/lan-yuan-maadi">Lan Yuan - Maadi</a>
                        <a href="/egypt/restaurants" ng-attr-target="{{enableAllRestDL? '_self' : null}}" class="p-t-md" target="_self"><i>More Restaurants...</i></a>
                    </div>
                    <div class="col-sm-4 hidden-xs">
                        <p>Popular Cuisines</p>
                                <a href="/egypt/italian/588/restaurants" target="_self">Italian</a>
                                <a href="/egypt/mexican/589/restaurants" target="_self">Mexican </a>
                                <a href="/egypt/sandwiches/590/restaurants" target="_self">Sandwiches</a>
                                <a href="/egypt/japanese/591/restaurants" target="_self">Japanese </a>
                                <a href="/egypt/pizza/592/restaurants" target="_self">Pizza</a>
                        <a href="/egypt/sitemap" target="_self" class="p-t-md"><i>More Cuisines...</i></a>
                    </div>
                    
                    <div class="col-sm-4 p-l-0 followDiv">
                      <p>Follow us on</p>
                        <div class="row follow-i custom_icons">
                            <a href="http://www.facebook.com/Talabat"><i class="fa fa-facebook fa-3x"></i></a>
                            <a href="http://twitter.com/Talabat"><i class="fa fa-twitter fa-3x"></i></a>
                            <a href="http://instagram.com/Talabat"><i class="fa fa-instagram fa-3x"></i></a>
                            <a href="https://www.linkedin.com/company/3604171"><i class="fa fa-linkedin fa-3x"></i></a>
                            <a href="http://www.youtube.com/TalabatGTC"><i class="fa fa-youtube-play fa-3x"></i></a>
                            <span class="stretch"></span>
                          
                        </div>

                    </div>
                </div>
            </section>
        </div>
        <section class="fix-text p-y-lg">
            <div class="row">
                <div class="col-xs-16 col-sm-13">
                    <span>
                        For any support or help you can contact us via our Live Chat
                    </span>
                </div>
                <div class="col-xs-16 col-sm-3 text-right">
                    Â©2022 <span>Talabat.com</span>
                </div>
            </div>
        </section>
            </section>
      </footer>
      <!-- ################end footer ###################### -->
    <script src="https://kit.fontawesome.com/8321aaa57d.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js" integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js" 
    integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <script>
      function diplayCart(){
        //get data from the local storage
        let cartItems=localStorage.getItem("productsInCart");
        let subTotalCost=localStorage.getItem('totalcost');
        let cartcount =localStorage.getItem('cartNumbers');
        //convert json to object
        cartItems=JSON.parse(cartItems);
        //convert sring to number
        subTotalCost =parseInt(subTotalCost);
        cartcount=parseInt(cartcount);
        //get html elements
        let productContainer = document.querySelector("#cart-items");
        let subtotalContainer =document.getElementById("product_subtotal_amt");
        let counterhead=document.getElementById("cartCounterNo");
        let totalAmount =document.getElementById('total_amount');

        if(cartItems && productContainer){
          $("#emptycart").hide();
         Object.values(cartItems).forEach(item=>{
       productContainer.innerHTML+=
            `
            <div  class="card p-4" >
             <div class="row">
                        <div class="col-md-5 col-11 mx-auto bg-light d-flex justify-content-center align-items-center shadow product_img ">
                          <!-- the image tag will be replaced with the image of the orderd item -->
                          <img src="${item.imgSrc}" class="img-fluid" alt="cart img">
                        </div>

                        <!-- cart product details -->
                        <div class="col-md-7 col-11 mx-auto px-4 mt-2">
                          <div class="row">
                            <!-- product name -->
                            <div class="col-6 card-title">
                              <!-- will get h1 from the product items -->
                              <h1 class="mb-4 product_name">${item.fname}</h1>
                              <!-- will get the paragraph from items data -->
                              <p class="mb-2">${item.description} </p>
                            </div>
                            <!-- quantity inc dec -->
                            <div  class="col-6">
                              <ul class="pagination justify-content-end set_quantity">
                                <li class="page-item "><button class="page-link qty-icons"  onclick="decQty()"><i class="fa-solid fa-minus"></i></button></li>
                                <li class="page-item"><input style="width:50px;" type="text" class="page-link input-qty" value="${item.count}"
                                  id="qtybox" ></li>
                                <li class="page-item"><button class="page-link qty-icons"  onclick="incQty()"><i class="fa-duotone fa-plus"></i></button></li>
                              </ul>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-8 d-flex justify-content-between remove_wish">
                              <p><i class="fas fa-trash-alt"></i> Remove Items</p>
                            </div>
                            <div class="col-4 d-flex justify-content-end price_money">
                              <!-- inside he span we will get the item price -->
                              <h3>EGP<span id="itemPrice">${item.price} </span></h3>
                            </div>
                          </div>
                      </div>
                    </div>
                  </div> `
          });

          subtotalContainer.innerHTML = subTotalCost ;
          counterhead.innerHTML=cartcount;
          totalAmount.innerHTML = subTotalCost + 20 ;
          
        }else{
          $("#hideContainer").hide();
          $("#cart-itemNo").hide();
          let emptycart=document.getElementById("emptycart");
          emptycart.innerHTML =` <div class="row">
				 
         <div class="col-md-12">
         
             <div class="card">
           <div class="card-header">
           <h5>Cart</h5>
           </div>
           <div class="card-body cart">
               <div class="col-sm-12 empty-cart-cls text-center">
                 <img src="./assest/images/no-cart.svg" width="130" height="130" class="img-fluid mb-4 mr-3">
                 <h3><strong>Your Cart is Empty</strong></h3>
                 <h4>Add something to make me happy :)</h4>
                 <a href="./All_resturants.html" class="btn btn-primary cart-btn-transform m-3" data-abc="true">continue shopping</a>
                 
               
               </div>
           </div>
       </div>
           
         
         </div>
        
        </div>`
        }
      
      } 
      diplayCart();
    </script>
    <script src="./assest/js/main.js"></script>
  </body>
</html>